<div class="packageInfo">

    <h3>{$package->getTitle()}</h3>

    <p class="description">{nl2br(htmlspecialchars($package->get('package_description')))}</p>

    {@$rowspan=2}
    <!--@if($module_info->resource_use_path=='Y')-->{@$rowspan++}<!--@end-->
    <!--@if($package->get('homepage'))-->{@$rowspan++}<!--@end-->
    <!--@if($package->get('path'))-->{@$rowspan++}<!--@end-->

    <table class="packageView">
    <colgroup>
        <col width="120"/>
        <col width="*"/>
        <col width="120"/>
        <col width="*"/>
        <col width="120" />
    </colgroup>
    <tr>
        <th>{$lang->package_category}</th>
        <td colspan="2"><a href="{getUrl('package_srl','','category_srl', $package->get('category_srl'))}">{$categories[$package->get('category_srl')]->title}</a></td>
        <td class="star">
            <!--@for($i=0;$i<5;$i++)--><!--@if($i<$package->get('star'))--><img src="./img/starOn.gif" alt="" /><!--@else--><img src="./img/starOff.gif" alt="" /><!--@end--><!--@end-->
			<!--@if($package->get('package_voter'))-->
            {sprintf("%0.1f",$package->get('package_voted')/$package->get('package_voter')*2)} /{number_format($package->get('package_voter'))}
			<!--@else-->
			0 / 0
			<!--@end-->
        </td>
        <td class="right thumbnail" rowspan="{$rowspan}"><img src="{$package->get('item_screenshot_url')}" width="100" height="100" alt="" /></td>
    </tr>
    <tr>
        <th>{$lang->package_license}</th>
        <td colspan="4">{htmlspecialchars($package->get('license'))}</td>
    </tr>
    <tr>
        <th>{$lang->package_author}</th>
        <td colspan="4"><a href="#" onclick="return false;" class="member_{$package->get('member_srl')}">{$package->get('nick_name')}</a></td>
    </tr>
    <!--@if($package->get('homepage'))-->
    <tr>
        <th>{$lang->homepage}</th>
        <td colspan="4"><a href="{$package->get('homepage')}" onclick="window.open(this.href); return false;">{$package->get('homepage')}</a></td>
    </tr>
    <!--@end-->
    <!--@if($package->get('path') && $module_info->resource_use_path=='Y')-->
    <tr>
        <th>{$lang->package_path}</th>
        <td colspan="4">{$package->get('path')}</td>
    </tr>
    <!--@end-->
    <tr>
        <th>{$lang->package_regdate}</th>
        <td colspan="2">{zdate($package->get('package_regdate'), "Y-m-d H:i")}</td>
        <th>{$lang->package_downloaded_count}</th>
        <td>{$package->get('package_downloaded')}</td>
    </tr>
    <tr class="division">
        <!--@if($package->get('item_version')!=$latest_package->item_version)-->
        <th>{$lang->selected_version}</th>
        <td colspan="3">
            {$package->get('item_version')}
            ({$lang->latest_version} : <a href="{getUrl('item_srl','','type','')}">{$latest_package->item_version}</a>)
        </td>
        <!--@else-->
        <th>{$lang->latest_version}</th>
        <td colspan="3">
            {$package->get('item_version')}
        </td>
        <!--@end-->
        <td rowspan="2" class="right">
            <!--@if($package->get('download_url'))-->
            <a href="{$package->get('download_url')}" class="button strong"><span>{$lang->download}</span></a>
            <!--@else-->
            &nbsp;
            <!--@end-->
        </td>
    </tr>
    <tr>
        <th>{$lang->downloaded_count}</th>
        <td colspan="3">{$package->get('item_downloaded')}</td>
    </tr>
    <!--@if(count($package->get('depencies')))-->
    <tr>
        <th>{$lang->attach_dependency}</th>
        <td colspan="4">
            <ul class="dependency">
            <!--@foreach($package->get('depencies') as $val)-->
                <li><a href="{getSiteUrl($site_module_info->domain, '', 'mid', $mid, 'package_srl', $val->package_srl)}">{$val->title} ver. {$val->version}</a></li>
            <!--@end-->
            </ul>
        </td>
    </tr>
    <!--@end-->
    <tr>
        <th>{$lang->package_update}</th>
        <td colspan="2">{zdate($package->get('item_regdate'), "Y-m-d H:i")}</td>
        <td class="star" colspan="2">
            <!--@for($i=0;$i<5;$i++)--><!--@if($i<$package->get('item_star'))--><img src="./img/starOn.gif" alt="" /><!--@else--><img src="./img/starOff.gif" alt="" /><!--@end--><!--@end-->
			<!--@if($package->get('item_voter'))-->
            {sprintf("%0.1f",$package->get('item_voted')/$package->get('item_voter')*2)} /{number_format($package->get('item_voter'))}
			<!--@else-->
			0 / 0
			<!--@end-->
        </td>
    </tr>
    <tr class="division">
        <td colspan="5">{$package->getContent()}</td>
    </tr>
    </table>
    
    <div class="button_box">
            <a href="{getUrl('type','all')}" class="button"><span>{$lang->cmd_view_all_version}</span></a>
            <a href="{getUrl('package_srl','','type','')}" class="button"><span>{$lang->cmd_back}</span></a>
    </div>
    <!--@if($package->getCommentCount())-->
	<ul class="comments">
		{@ $_comment_list = $package->getComments() }
		<!--@foreach($_comment_list as $key => $comment)-->
        <li id="comment_{$comment->get('comment_srl')}">
            <div class="authorBox">
                <a href="#" onclick="return false;" class="member_{$comment->get('member_srl')}">{$comment->getNickName()}</a>
                <span class="estimate">
                    <!--@for($i=0;$i<5;$i++)--><!--@if($i<$comment->get('voted_count'))--><img src="./img/starOn.gif" alt="" /><!--@else--><img src="./img/starOff.gif" alt="" /><!--@end--><!--@end-->
                </span>
                <span class="date">{$comment->getRegdate("Y-m-d H:i")}</span>
                <div class="btnBox">
                    <!--@if($comment->isGranted())-->
                    <a href="#" onclick="if(confirm('{$lang->confirm_delete}')) doDeleteComment({$package->get('package_srl')}, {$package->get('item_srl')}, {$comment->get('comment_srl')});return false;" class="deleteBtn button small"><span>{$lang->cmd_delete}</span></a>
                    <!--@end-->
                </div>
            </div>
            <div class="contentBox">
                {$comment->getContent()}
            </div>
            <div class="nullBox"></div>
        </li>
        <!--@end-->
    </ul>
    <!--@end-->


    <!--@if(!$voted && $is_logged)-->
    <form action="./" method="post" onsubmit="return procFilter(this, insert_comment)" class="commentForm" >
    <input type="hidden" name="vid" value="{$vid}" />
    <input type="hidden" name="mid" value="{$mid}" />
    <input type="hidden" name="package_srl" value="{$package->get('package_srl')}" />
    <input type="hidden" name="item_srl" value="{$package->get('item_srl')}" />
    <input type="hidden" name="star_point" value="" />

    <table width="100%" cellspacing="0" cellpadding="0" class="view_type1">
    <colgroup>
    <col width="140" /><col />
    </colgroup>
    <tr>
        <th>{$lang->star_point}</th>
        <td>
            <ul class="starPoint">
                <li><a href="#" onclick="return false;" rel="1">1</a></li>
                <li><a href="#" onclick="return false;" rel="2">2</a></li>
                <li><a href="#" onclick="return false;" rel="3">3</a></li>
                <li><a href="#" onclick="return false;" rel="4">4</a></li>
                <li><a href="#" onclick="return false;" rel="5">5</a></li>
            </ul>
        </td>
    </tr>
    <tr>
        <th>{$lang->resource_estimate}</th>
        <td><textarea name="content" class="commentArea"></textarea></td>
    </tr>
    <tr>
        <td class="center" colspan="2">
            <span class="button strong"><input type="submit" value="{$lang->cmd_estimate}" accesskey="s" /></span>
        </td>
    </tr>
    </table>

    </form>
    <!--@end-->
</div>
